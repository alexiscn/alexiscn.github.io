---
layout: post
title:  "Filebox：玩转文件"
date:   2021-07-23 10:02:10 +0800
tag: ios
---

本文已经首发在[少数派](https://sspai.com/post/67628)，现在在博客中记录一下。


![](/assets/images/filebox/Filebox-Press.png)

经过十几个版本的迭代，Filebox终于可以向大家公布了。Filebox 是一款基于文件的多媒体管理应用，提供了本地/远程文件管理、本地音乐播放器、视频播放器等功能。

## 文件管理

![文件管理器](/assets/images/filebox/File-Manager.png)

文件管理是Filebox的核心功能之一，也是开发较为耗时的一个功能。在设计之初有点纠结是否集成系统的 [File Provider](https://developer.apple.com/documentation/fileprovider)，但考虑到一些功能File Provider不支持以及扩展性，于是就自己实现了一个类似文件应用的管理器。

文件管理的主要功能有：

- 导入文件
- 预览文件
- 分享文件
- 压缩、解压缩
- 文件搜索
- 构建音乐播放列表
- 编辑、移动、删除文件
- 连接远程服务器
- 查看文件信息
- 等等......

### 文件导入方式

Filebox提供了多种文件导入方式：

- 通过AirDrop
- 通过HTTP共享
- 通过网络共享
- 通过“文件”应用
- 通过链接下载

将文件导入到Filebox后，你可以进行文件管理了。同时Filebox的文件系统是完全开放的，也就是说可以使用任意其他应用访问Filebox的文件系统并对其进行修改。举个例子，用Safari下载了加密的压缩文件，可以使用文件应用将其复制到Filebox，在Filebox中输入解压密码进行解压缩。

### 压缩与解压缩

Filebox提供了对多种压缩文件格式的支持，如常见的 zip、rar、tar、7z等。同时Filebox还支持解压带密码保护的压缩文件。

Filebox 提供了将文件与文件夹压缩为zip文件的功能，如果你想要保护你的压缩文件，你还可以将其压缩为带有密码保护的zip文件。

## 连接

通过连接远程服务，你可以访问远程文件，如家中NAS上的电影、坚果云上的音乐等。Filebox支持SMB、Synology、FTP、SFTP、WebDAV(HTTPS)等协议的远程连接。 在连接远程服务的时候，你可以选择将账户信息保存以便下一次快速访问。

![连接](/assets/images/filebox/Connection.png)

> Filebox 不会上传你的用户名与密码，你的账号信息会存在系统KeyChain中以便下次自动登录

已保存的远程连接账户信息会出现在连接Tab，用于下次免密码访问。你还可以将喜爱的文件夹添加到“我的收藏”中。例如你正在追剧，该剧的视频文件存储在一个文件夹中，你可以将该剧的文件夹添加到我的收藏，这样打开应用就可以直接访问文件目录。

## 媒体库

媒体库中包含了多媒体相关功能的入口：最近播放列表、视频列表、音乐列表等，还提供了连接远程服务的入口，方便浏览远程文件。

通常我只会在这个界面操作，如最近看的视频、电视剧，Filebox 会记住上一次的播放记录，甚至当你在追剧的时候，还会记住播放列表，让你在播放器中就可以快速切换剧集。

![媒体库](/assets/images/filebox/MediaLibrary.png)

媒体库未来可能会改版，具体可能涉及到如下的几个功能：

- 在用户允许的情况下扫描用户的远程服务（如局域网NAS）并将其所有的视频文件整理归类显示在媒体库中，方便用户直接浏览观看
- 增加本地音乐按专辑、歌手等进行分组
- 增加备份照片的入口
- 等等......

## 视频播放器

视频播放器是Filebox强大的功能之一，也是我最常用的功能之一。不仅能播放本地的视频，还支持各种协议的远程视频，如常见的SMB、WebDAV、FTP等协议，针对群晖NAS，还提供了群晖协议，速度相对于常用的SMB协议会快许多。

![视频播放器](/assets/images/filebox/Video-Player.png)

视频播放器提供了多种手势的快捷操作：

- 屏幕左右滑动手势：后退/快进
- 屏幕左侧上下滑动手势：调节屏幕亮度
- 屏幕右侧上下滑动手势：调节音量大小
- 点击进度条直接跳转该进度播放

视频播放器会记住上一次的播放历史并会显示在媒体库中，方便继续观望未看完的视频。同时视频播放器还提供了多种个性化设置:

- 默认的播放速度
- 是否优先使用系统播放器
- 是否默认进入全屏
- 是否自动播放下一项
- 等等

![视频播放器2](/assets/images/filebox/Video-Player2.png)

另外对于 `mp4`、`mov` 等格式的视频文件，使用系统播放器将支持系统原生的 [Picture in Picture](https://developer.apple.com/documentation/avkit/avpictureinpicturecontroller) 体验。

## 音乐播放器

音乐播放器是Filebox的另一个核心功能，也是我另一个最常用的功能。它提供了诸如播放列表、多种播放模式、歌词等常见的音乐播放器功能，同时还提供了编辑ID3信息的功能，让你在手机上就能完善您的歌曲信息。

![音乐播放器](/assets/images/filebox/Music-Player.png)

当你导入的音乐文件没有多媒体元数据信息时，Filebox会根据文件名字去搜索对应的歌曲，默认Filebox不会自动修改音乐本身的数据。

如果你想编辑音乐的元数据信息，Filebox还提供了对`m4a`与`mp3`文件格式的编辑功能。

对于正在播放的音乐，会在首页的底部添加一个正在播放音乐条，可以通过他实现快捷切歌、播放/暂停、关闭等功能，同时还支持手势左右滑动来切换上一首/下一首。

![正在播放](/assets/images/filebox/Music-Player-Now-Playing.png)

在文件管理中提到可以构建本地音乐播放列表，Filebox提供了基于目录的音乐播放列表。即你可以将喜欢的音乐放置到同一个文件夹内，即创建了一个播放列表，点击文件夹中的音乐就可以播放该列表。同时为了满足多种需求，还提供了四种播放列表模式供选择。

![播放列表模式](/assets/images/filebox/MusicPlayerPlaylist.png)

## 文本编辑器

Filebox针对本地文本文件，如`.swift`、`.js`、`.txt`、`.markdown` 等还提供一个简单的编辑器，支持预览打开。对于代码文件与Markdown文件，还支持语法高亮。

![TextEditor](/assets/images/filebox/TextEditor.png)

> 编辑器只是Filebox的一个辅助功能，目前还在较为初级阶段，后期会逐步完善。

## 产品定价

Filebox的核心功能均是免费的，你无需购买即可使用所有Filebox的核心功能：

- 文件管理器
- 音乐播放器
- 视频播放器
- 照片浏览器

Filebox会在一些个性化的功能上进行应用内购买，如应用主题、应用图标、一些非常个性化的功能设置，**一次购买永久有效**。

## 未来规划

Filebox还在快速迭代中，仍有一些在计划中的开发需求：

- 集成云服务的支持，如Dropbox、OneDrive、GoogleDrive等
- 实现上传队列
- 备份照片
- 集成 JellyFin 等媒体服务

## 更多内容

你可以在 [App Store](https://apps.apple.com/cn/app/id1558391784) 免费下载Filebox，你也可以访问 [官网](https://filebox.space/cn/) 了解更多。

期待与你相遇，感谢。
